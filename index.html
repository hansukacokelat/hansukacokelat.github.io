<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Kelas 10D - Saudara Sejati 💯</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f9fa;
      padding: 20px;
      color: #333;
    }

    h1, h2 {
      color: #2c3e50;
    }

    form, .output-box {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    button {
      background: #28a745;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background: #218838;
    }

    #downloadBtn {
      background: #007bff;
    }

    #downloadBtn:hover {
      background: #0056b3;
    }

    .pesan, .absensi, .jabatan {
      background: #fff;
      padding: 10px;
      border-left: 4px solid #007bff;
      margin-bottom: 10px;
      border-radius: 4px;
    }

    .pesan small {
      display: block;
      color: #666;
    }

    #fileInput {
      padding: 8px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>👨‍🏫 Website Kelas 10D</h1>
  <p><strong>Silakan Daftar/Login dan Gunakan Fitur Kelas!</strong></p>

  <div id="loginSection">
    <h2>Login</h2>
    <form id="loginForm">
      <input type="text" id="loginNama" placeholder="Nama Pengguna" required>
      <input type="password" id="loginPassword" placeholder="Password" required>
      <button type="submit">Login</button>
    </form>
  </div>

  <div id="registerSection">
    <h2>Daftar Pengguna Baru</h2>
    <form id="registerForm">
      <input type="text" id="registerNama" placeholder="Nama Pengguna" required>
      <input type="password" id="registerPassword" placeholder="Password" required>
      <button type="submit">Daftar</button>
    </form>
  </div>

  <div id="mainSection" style="display:none;">
    <h2>Selamat Datang, <span id="userNameDisplay"></span>!</h2>
    <button id="logoutBtn">Logout</button>

    <h3>Pesan</h3>
    <form id="pesanForm">
      <input type="text" id="pesanDari" placeholder="Dari (Nama Pengirim)" required>
      <input type="text" id="pesanKepada" placeholder="Kepada (Nama Penerima)" required>
      <textarea id="pesanIsi" rows="3" placeholder="Tulis pesan..." required></textarea>
      <button type="submit">Kirim Pesan</button>
    </form>

    <h3>Kirim Dokumen</h3>
    <form id="dokumenForm">
      <input type="file" id="fileInput" accept=".jpg, .jpeg, .png, .pdf" required>
      <button type="submit">Kirim Dokumen</button>
    </form>

    <h3>Absensi</h3>
    <form id="absensiForm">
      <input type="text" id="absensiNama" placeholder="Nama Siswa" required>
      <select id="absensiStatus" required>
        <option value="Hadir">Hadir</option>
        <option value="Tidak Hadir">Tidak Hadir</option>
        <option value="Izin">Izin</option>
        <option value="Sakit">Sakit</option>
      </select>
      <textarea id="absensiKeterangan" placeholder="Keterangan (opsional)"></textarea>
      <button type="submit">Simpan Absensi</button>
    </form>

    <h3>Jabatan Kelas</h3>
    <form id="jabatanForm">
      <input type="text" id="jabatanNama" placeholder="Nama Siswa" required>
      <input type="text" id="jabatan" placeholder="Jabatan Kelas (misalnya Ketua, Sekretaris)" required>
      <button type="submit">Set Jabatan</button>
    </form>

    <div id="outputMessages"></div>
    <div id="outputAbsensi"></div>
    <div id="outputJabatan"></div>
  </div>

  <script>
    let pengguna = JSON.parse(localStorage.getItem('pengguna')) || [];
    let pesanList = [];
    let absensiList = [];
    let jabatanList = [];

    // Login Section
    document.getElementById("loginForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const nama = document.getElementById("loginNama").value.trim();
      const password = document.getElementById("loginPassword").value.trim();
      const user = pengguna.find(u => u.nama === nama && u.password === password);

      if (user) {
        localStorage.setItem('currentUser', JSON.stringify(user));
        window.location.reload();
      } else {
        alert("Nama atau Password salah");
      }
    });

    // Register Section
    document.getElementById("registerForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const nama = document.getElementById("registerNama").value.trim();
      const password = document.getElementById("registerPassword").value.trim();

      if (pengguna.find(u => u.nama === nama)) {
        alert("Pengguna sudah terdaftar!");
      } else {
        pengguna.push({ nama, password });
        localStorage.setItem('pengguna', JSON.stringify(pengguna));
        alert("Registrasi berhasil, silakan login!");
      }
    });

    // Logout
    document.getElementById("logoutBtn").addEventListener("click", function() {
      localStorage.removeItem('currentUser');
      window.location.reload();
    });

    // Display Logged In User
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (currentUser) {
      document.getElementById("loginSection").style.display = "none";
      document.getElementById("registerSection").style.display = "none";
      document.getElementById("mainSection").style.display = "block";
      document.getElementById("userNameDisplay").innerText = currentUser.nama;
    }

    // Kirim Pesan
    document.getElementById("pesanForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const dari = document.getElementById("pesanDari").value;
      const kepada = document.getElementById("pesanKepada").value;
      const isi = document.getElementById("pesanIsi").value;

      pesanList.push({ dari, kepada, isi, waktu: new Date().toLocaleString() });
      tampilkanPesan();
      this.reset();
    });

    // Tampilkan Pesan
    function tampilkanPesan() {
      const output = document.getElementById("outputMessages");
      output.innerHTML = '';
      pesanList.forEach(pesan => {
        output.innerHTML += `
          <div class="pesan">
            <strong>${pesan.dari} → ${pesan.kepada}</strong><br>
            <em>"${pesan.isi}"</em>
            <small>🕒 ${pesan.waktu}</small>
          </div>`;
      });
    }

    // Kirim Dokumen
    document.getElementById("dokumenForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const file = document.getElementById("fileInput").files[0];
      if (file) {
        alert(`Dokumen ${file.name} berhasil dikirim!`);
      }
    });

    // Absensi
    document.getElementById("absensiForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const nama = document.getElementById("absensiNama").value;
      const status = document.getElementById("absensiStatus").value;
      const keterangan = document.getElementById("absensiKeterangan").value;

      absensiList.push({ nama, status, keterangan, waktu: new Date().toLocaleString() });
      tampilkanAbsensi();
      this.reset();
    });

    function tampilkanAbsensi() {
      const output = document.getElementById("outputAbsensi");
      output.innerHTML = '';
      absensiList.forEach(absen => {
        output.innerHTML += `
          <div class="absensi">
            <strong>${absen.nama} - ${absen.status}</strong><br>
            <em>${absen.keterangan || 'No Keterangan'}</em>
            <small>🕒 ${absen.waktu}</small>
          </div>`;
      });
    }

    // Jabatan Kelas
    document.getElementById("jabatanForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const nama = document.getElementById("jabatanNama").value;
      const jabatan = document.getElementById("jabatan").value;

      jabatanList.push({ nama, jabatan });
      tampilkanJabatan();
      this.reset();
    });

    function tampilkanJabatan() {
      const output = document.getElementById("outputJabatan");
      output.innerHTML = '';
      jabatanList.forEach(jabatan => {
        output.innerHTML += `
          <div class="jabatan">
            <strong>${jabatan.nama} - ${jabatan.jabatan}</strong>
          </div>`;
      });
    }
  </script>
</body>
</html>
