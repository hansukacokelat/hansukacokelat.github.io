<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Kelas 10D - Saudara Sejati üíØ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #333; /* Background gelap */
      color: #fff; /* Teks putih */
      padding: 20px;
    }

    h1, h2 {
      color: #fff; /* Judul dengan warna putih */
    }

    form, .output-box {
      background: #444; /* Formulir dengan latar belakang abu-abu gelap */
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.5);
    }

    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      border: 1px solid #888;
      border-radius: 4px;
      background-color: #222; /* Latar belakang input gelap */
      color: #fff; /* Teks input putih */
    }

    button {
      background: #555; /* Tombol dengan latar belakang abu-abu */
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background: #666; /* Tombol berubah lebih terang saat hover */
    }

    .pesan {
      background: #444; /* Pesan dengan latar belakang abu-abu gelap */
      padding: 10px;
      border-left: 4px solid #fff; /* Pesan dengan garis putih di sebelah kiri */
      margin-bottom: 10px;
      border-radius: 4px;
      font-size: 14px;
    }

    .pesan small {
      display: block;
      color: #bbb; /* Teks kecil dengan warna abu-abu */
    }

    .pesan.pribadi {
      border-left-color: #ff9800; /* Pesan pribadi dengan garis oranye */
    }

    .pesan.publik {
      border-left-color: #007bff; /* Pesan publik dengan garis biru */
    }

    .msg-header {
      font-weight: bold;
      color: #fff; /* Header pesan putih */
    }

    h3 {
      color: #fff; /* Heading warna putih */
    }

    /* Styling tambahan untuk elemen lain */
    #registerSection, #loginSection, #mainSection {
      background: #333;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    .error {
      color: #e74c3c; /* Warna merah untuk error */
    }

  </style>
</head>
<body>
  <h1>üë®‚Äçüè´ Website Kelas 10D</h1>
  <p><strong>Silakan Daftar dan Login terlebih dahulu untuk mengakses fitur kelas!</strong></p>

  <!-- Bagian Daftar -->
  <div id="registerSection">
    <h2>Daftar Pengguna Baru</h2>
    <form id="registerForm">
      <input type="text" id="registerNama" placeholder="Nama Pengguna" required>
      <input type="password" id="registerPassword" placeholder="Password" required>
      <button type="submit">Daftar</button>
    </form>
  </div>

  <!-- Bagian Login -->
  <div id="loginSection" style="display:none;">
    <h2>Login</h2>
    <form id="loginForm">
      <input type="text" id="loginNama" placeholder="Nama Pengguna" required>
      <input type="password" id="loginPassword" placeholder="Password" required>
      <button type="submit">Login</button>
    </form>
  </div>

  <!-- Bagian Utama setelah login -->
  <div id="mainSection" style="display:none;">
    <h2>Selamat Datang, <span id="userNameDisplay"></span>!</h2>
    <button id="logoutBtn">Logout</button>

    <h3>Pesan</h3>
    <form id="pesanForm">
      <input type="text" id="pesanDari" placeholder="Dari (Nama Pengirim)" required>
      <input type="text" id="pesanKepada" placeholder="Kepada (Nama Penerima) / 'Semua' untuk publik" required>
      <textarea id="pesanIsi" rows="3" placeholder="Tulis pesan..." required></textarea>
      <select id="pesanKategori" required>
        <option value="pribadi">Pesan Pribadi</option>
        <option value="publik">Pesan Publik</option>
      </select>
      <button type="submit">Kirim Pesan</button>
    </form>

    <h3>Pesan yang Dikirim:</h3>
    <div id="outputMessages"></div>
  </div>

  <script>
    let pengguna = JSON.parse(localStorage.getItem('pengguna')) || [];
    let pesanList = JSON.parse(localStorage.getItem('pesanList')) || [];

    function tampilkanPesan() {
      const output = document.getElementById("outputMessages");
      output.innerHTML = '';
      pesanList.forEach(pesan => {
        let pesanClass = pesan.kategori === 'pribadi' ? 'pribadi' : 'publik';
        output.innerHTML += `
          <div class="pesan ${pesanClass}">
            <div class="msg-header">${pesan.dari} ‚Üí ${pesan.kepada}</div>
            <em>"${pesan.isi}"</em>
            <small>üïí ${pesan.waktu}</small>
          </div>`;
      });
    }

    // Login Section
    document.getElementById("loginForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const nama = document.getElementById("loginNama").value.trim();
      const password = document.getElementById("loginPassword").value.trim();
      const user = pengguna.find(u => u.nama === nama && u.password === password);

      if (user) {
        localStorage.setItem('currentUser', JSON.stringify(user));
        window.location.reload();
      } else {
        alert("Nama atau Password salah");
      }
    });

    // Register Section
    document.getElementById("registerForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const nama = document.getElementById("registerNama").value.trim();
      const password = document.getElementById("registerPassword").value.trim();

      if (pengguna.find(u => u.nama === nama)) {
        alert("Pengguna sudah terdaftar!");
      } else {
        pengguna.push({ nama, password });
        localStorage.setItem('pengguna', JSON.stringify(pengguna));
        alert("Registrasi berhasil, silakan login!");
        toggleView("login");
      }
    });

    // Logout
    document.getElementById("logoutBtn").addEventListener("click", function() {
      localStorage.removeItem('currentUser');
      window.location.reload();
    });

    // Tampilkan User yang sudah login
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (currentUser) {
      document.getElementById("registerSection").style.display = "none";
      document.getElementById("loginSection").style.display = "none";
      document.getElementById("mainSection").style.display = "block";
      document.getElementById("userNameDisplay").innerText = currentUser.nama;
    } else {
      document.getElementById("registerSection").style.display = "block";
      document.getElementById("loginSection").style.display = "none";
      document.getElementById("mainSection").style.display = "none";
    }

    // Kirim Pesan
    document.getElementById("pesanForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const dari = document.getElementById("pesanDari").value;
      const kepada = document.getElementById("pesanKepada").value;
      const isi = document.getElementById("pesanIsi").value;
      const kategori = document.getElementById("pesanKategori").value;

      if (!dari || !kepada || !isi) return;

      const pesan = {
        dari,
        kepada,
        isi,
        kategori,
        waktu: new Date().toLocaleString()
      };

      pesanList.push(pesan);
      localStorage.setItem('pesanList', JSON.stringify(pesanList));
      tampilkanPesan();
      this.reset();
    });

    // Fungsi untuk mengganti tampilan
    function toggleView(view) {
      if (view === "login") {
        document.getElementById("registerSection").style.display = "none";
        document.getElementById("loginSection").style.display = "block";
        document.getElementById("mainSection").style.display = "none";
      } else if (view === "main") {
        document.getElementById("registerSection").style.display = "none";
        document.getElementById("loginSection").style.display = "none";
        document.getElementById("mainSection").style.display = "block";
      }
    }
  </script>
</body>
</html>
